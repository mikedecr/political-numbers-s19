<!DOCTYPE html>
<html>
  <head>
    <title>Data (Finally!)</title>
    <meta charset="utf-8">
    <meta name="author" content="Understanding Political Numbers" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data (Finally!)
### Understanding Political Numbers
### Feb 6, 2019

---


class: center, middle



# Agenda

Technical lesson: The whole lecture

A "vocabulary" of data tables

Variable "coding"


???

- get us comfortable using the language of data
- get us comfortable with a mental picture of data in our heads

Essay 1

- Variable measuring: How specific? Don't need to talk about specific data sources. I don't need to know what survey you would get voter data from, or what government data you would use to get information on military casualties or something
- Discuss is conceptually. Talk about *possibilities*, not the specifics of a data source



---

class: inverse, middle, center

# Setting the scene

???

Data on all countries in the world

- Life expectancy
- GDP per capita
- Total population

---

class: middle, center

# How do you organize data?


???

It lives in my computer, 

- but what format is going to help me
- is it just a text file that has writing in it? No
- Maybe it should live in a spreadsheet, but do you know why it should live in a spread sheet? Do you know why that is useful?
- What kind of language can we use to talk about that spreadsheet? (And other topics of data organization)



---

class: center

## Data tables (a.k.a. "data frames")

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; continent &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; year &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lifeExp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; pop &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gdpPercap &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1952 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28.801 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8425333 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 779.4453 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1957 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 30.332 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9240934 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 820.8530 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1962 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31.997 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10267083 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 853.1007 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1967 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34.020 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11537966 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 836.1971 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1972 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36.088 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13079460 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 739.9811 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1977 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 38.438 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14880372 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 786.1134 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


(Data from the `gapminder` R package)

???

Let's just get oriented

- Just describe what's in here (without row/column vocab)
- we have country, we know what continent it's in
- it looks like their GDP per capita was (...)

--

Rows are **cases,** a.k.a. "units." What "objects" you studying?

Columns are **variables,** a.k.a. *attributes* or *features* of cases

Cells are **values,** a.k.a. observed measurements of a variable



---

## Data tables are organized by the "unit of observation"

One row per "unit." What is the unit of observation?

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; continent &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; year &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lifeExp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; pop &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gdpPercap &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1952 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28.801 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8425333 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 779.4453 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1957 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 30.332 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9240934 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 820.8530 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1962 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31.997 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10267083 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 853.1007 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1967 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34.020 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11537966 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 836.1971 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1972 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36.088 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13079460 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 739.9811 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1977 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 38.438 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14880372 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 786.1134 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

--

**Unit of observation:** what variable (or combination of variables) *uniquely identifies* cases from one another?


???

- Uniquely identifying cases is extremely important for keeping data organized
- especially if combining data from multiple sources, you need to match information in one table with information in another
- Data may contain "country codes" or "ID numbers"




---

# Variables live in columns

.left-code[
Isolating one variable

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; continent &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]


--

.right-plot[
**Levels**: all possible *values* that a variable could have




```r
unique(gapminder$continent) 
```

```
## [1] "Asia"     "Europe"   "Africa"   "Americas" "Oceania"
```
]


---

## On so many levels...

--

**Levels of a variable** are possible values taken by a variable

- "We expose our plants to various levels of sunlight"


--

**Levels of measurement** describe information contained in measures

- Nominal, ordinal, interval, ratio

???

- We don't often talk explicitly about levels of measurement
- We are just aware of them because the form of the data affect the types of analysis that you could do
- That's an important point


--

**Level of analysis** means "unit of analysis"

- Individual-level analysis
- State-level analysis
- Cross-national analysis




---

### Benefits of tabular data


.pull-left[

**Calculations.** If `\(\mathit{GDP \, per \, capita} = \displaystyle\frac{\mathit{GDP}}{\mathit{Pop}}\)`, find GDP.

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; pop &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gdpPercap &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31889923 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 974.5803 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Albania &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3600523 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5937.0295 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Algeria &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33333216 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6223.3675 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Angola &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12420476 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4797.2313 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Argentina &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40301927 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12779.3796 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20434176 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34435.3674 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

???

- Calculations are easy because variables are organized so you can do quick math
- 




---

### Benefits of tabular data


.pull-left[

**Calculations.** If `\(\mathit{GDP \, per \, capita} = \displaystyle\frac{\mathit{GDP}}{\mathit{Pop}}\)`, find GDP.

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; pop &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gdpPercap &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gdp &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31889923 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 974.5803 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31079291949 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Albania &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3600523 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5937.0295 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21376411360 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Algeria &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33333216 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6223.3675 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 207444851958 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Angola &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12420476 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4797.2313 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59583895818 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Argentina &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40301927 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12779.3796 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 515033625357 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20434176 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34435.3674 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 703658358894 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

???

- Calculations are easy because variables are organized so you can do quick math


--

.pull-right[
**Plotting**. For each unit, variable values serve as `\((x, y)\)` coordinates.

&lt;img src="05-data_files/figure-html/plot-data-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]




---

class: center, middle, inverse

# Data in the computer


---

# Data in R

.left-code[

```r
# attach the 'gapminder' package
library("gapminder")

# ...which contains this dataset
gapminder
```

Data can be numeric (`1952`) or text (`"Afghanistan"`)
]

.right-plot[

```
## # A tibble: 1,704 x 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;chr&gt;       &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # â€¦ with 1,694 more rows
```
]


???

- tibble means data table / data frame; it has cases as rows and variables in columns
- Columns have variable names, this is how you refer to the *vector* when you're programming
- there's a label for the data type. Integers (whole numbers), "doubles" (numbers with decimal precision), "factors" (categories that have text labels)


---

## "Coding" and "recoding"

.left-code[
You may encounter categorical data with numeric codes. 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; continent &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; continent (numeric) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Congo, Dem. Rep. &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Africa &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Panama &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Americas &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Vietnam &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Finland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Europe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Oceania &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

--

.right-plot[
Consult the "codebook"

&lt;img src="/Users/michaeldecrescenzo/Box Sync/teaching/270-numbers-S19/lectures/05-data/img/codebook.png" width="831" style="display: block; margin: auto;" /&gt;
]


???

What is *recoding*?

- data don't always come in the form you need it
- maybe you want to make a text label, change an existing label,
- collapse a complicated index (strong liberal, liberal, slightly liberal) to be just "liberal"



---

class: center, middle, inverse

# Practical advice


---

class: center, middle

# Practical advice


When "tidying up" your data

When recording "raw" data

`\(Observed = Truth + Bias + Error\)`


???

- Tidying: how are rows and columns when collecting new data, modifying existing data
  - rows are cases/units, columns are variables
- Raw data: include as much detail as possible up front
  - my advice, text coding for categorical/qualitative variables
  - You can always convert to numeric later, but starting with specificity and informative labels is good
  - give yourself the option to go simpler, but you can't get more complex once the data are already collected
- Raw data: only the detail that you can justify
  - detail that *you don't have* is noise or bias



---

class: center, middle, inverse

# What's next?




---

# What's next?

In section: getting oriented in R

Check out online practice resources

Next week: graphics (in theory) and graphics (in R)

Short Essay 1 due **one week from today**



&lt;!-- 
A vocabulary of data

- data table / data frame
- row and column
- case/observation and variable
- cell, value, levels

Measurement

- numeric coding
- codebook

Manipulating a data table

- add / multiply variables
- plot one variable against another variable (coordinates)
- sum, mean

Vocabulary of research design

- independent variable
- dependent variable
- treatment and control
- covariate



 --&gt;

&lt;!-- Measurements --&gt;

&lt;!-- examples of codings? --&gt;

&lt;!-- Variables --&gt;

&lt;!-- examples of levels --&gt;

&lt;!-- Data Tables --&gt;

&lt;!-- What you can do 
- plot X and Y
- add variables
--&gt;
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
